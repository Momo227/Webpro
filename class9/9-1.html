<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8"/>
</head>
<body>
  <h4>2 次元ランダムウォーク</h4>
  <canvas id="c1" width="800" height="800"></canvas><br>
  移動回数：<span id="move">0</span>&emsp;原点復帰回数：<span id="cnt">0</span><br>
  <script type="text/javascript">
  var canvas = document.getElementById('c1');
  var ctx = canvas.getContext("2d");
  var p, tid = null;
  var x, y, move, cnt;
  var r;

  function init()
  {
    x = y = 400; // 開始座標
    move = cnt = 0; // 移動回数と原点復帰回数を初期化
    ctx.beginPath();
    ctx.fillStyle = 'black';
    ctx.fillRect(0, 0, 800, 800); //背景を黒で描画
    ctx.putImageData(p, x, y);
    update();
  }
  function update(){
    // ここにプログラムを書き足しましょう
    for(var i = 0; i < 1000; i++){
      var r = Math.floor(Math.random() * 3);
      console.log(r);

      if(r == 0) x++;
      else if (r == 1) x--;
      else if (r == 2) y++;
      else y--;

      document.getElementById("move").innerHTML = ++move;
      if( x == 400 && y == 400 ) { // 原点に復帰した
        document.getElementById("cnt").innerHTML = ++cnt;
      }
      ctx.putImageData(p, x, y); // 点を描画する

      var r = parseInt(Math.random() * 3); //R, G, B の中で一つランダムに選択
      p.data[r] = (Math.random() < 0.5) ? Math.max(0,p.data[r]-2) : Math.min(255,p.data[r]+2); //明るさを変化させる
      ctx.putImageData(p, x, y); // 点を描画する
    }
    tid = setTimeout("update()", 50); //50 ミリ秒経過後に呼び出す

  }
  p = ctx.createImageData(1, 1); // 点の画像を用意
  p.data[0] = 128; // R
  p.data[1] = 128; // G
  p.data[2] = 128; // B
  p.data[3] = 128; // 透明度 (255 は透明にしない)
  init();
</script>
<input type="button" value="再スタート" onClick="init()">


<div style="background:#ffffff; padding:50px; border-radius: 0px; border: 2px dotted #556b2f;width:700px;">
  <ul>
    <h2>ランダム・ウォークとは (野村証券)<br></h2>

    <li type="circle">金融商品の値動きには規則性が無く、過去の変動とは一切関係ないとする仮説。今後の値動きを予測するうえで過去の値動きは参考にならず、過去の値動きの変動をパターン化することで投資判断材料にするテクニカル分析の有効性を否定している。現時点での株式市場には利用可能なすべての新たな情報が直ちに織り込まれており、株価の予測は不可能であるという学説の効率的市場仮説と密接に関連する。
      <br>
      <li type="circle">ランダム・ウォークについて物理学では、微粒子の不規則変動が分子の熱運動に起因することを1900年代初頭に著名科学者のアインシュタインが突き止めた背景がある。科学界では1820年代に水面の花粉の微粒子変動の不規則性を英植物学者ブラウンが発見したことから、同様の動きを「ブラウン運動」とも呼ぶ。金融商品の値動きが「ブラウン運動」と同じように不規則にランダム・ウォークする性質をもつのを最初に見つけたのは仏数学者バシェリエ(Louis Bachelier)とされ、1900年に関連する論文が発表されている。
        <br>
        <li type="circle">物理学のランダム・ウォークの和訳には酔っ払った人の千鳥足状態になぞらえた「酔歩」があるが、酔人がランダム・ウォーク状態で歩いた（変動）距離は歩いた（変動）時間の平方根に比例することが、現在の位置（場所）が過去の位置（場所）とは独立していることから導かれる。この考え方は、金融商品の収益率の変動を価格変動リスクとして示す標準偏差が時間の平方根に比例して大きくなることに対応し、ランダム・ウォークを仮定すると金融商品の価格変動リスクは保有期間が長くなるほど拡大する。
          <br>
          <li type="circle">株価や投資信託の基準価額のリターンの分布は実際には正規分布しないことが大半であるが、実務上、各種の指標分析はランダム・ウォークする仮定で行われることが一般的である。オプションの理論価格を求めるブラックショールズモデルなど金融工学の多くのモデルも金融商品の値動きがランダム・ウォークする前提で開発された。ランダム・ウォークでは、リターンの分布が正規分布することや、現時点での将来価格の期待値は現在値と変わらないとする「マルチンゲール」と呼ぶ確率数学の考え方を適用できることなどから、理論的な定式化がしやすいメリットがある。
            <br>
            <li type="circle">一方、ランダム・ウォークはあくまで金融市場が定常的に変動している場合のみに適用できる仮定にすぎなく、金融市場が急変し、相場が暴落した場合のテールリスクやブラックスワンは説明できないとして、実際の相場変動を分析する際、そのまま適用するのには批判的な考え方もある。特に「経済物理学」と呼ぶ分野では、ランダム・ウォークしない前提で市場の価格変動を解明する研究が行われている。
            </ul>
          </div>
        </body>
        </html>
